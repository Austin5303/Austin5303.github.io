<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>前端埋点与监控</title>
    <link href="/2021/03/26/%E5%89%8D%E7%AB%AF%E5%9F%8B%E7%82%B9%E4%B8%8E%E7%9B%91%E6%8E%A7/"/>
    <url>/2021/03/26/%E5%89%8D%E7%AB%AF%E5%9F%8B%E7%82%B9%E4%B8%8E%E7%9B%91%E6%8E%A7/</url>
    
    <content type="html"><![CDATA[<p>发现了一篇写的比较好的关于前端埋点与监控的文章，在此分享一下</p><a id="more"></a><p>&lt; a href=’<a href="https://mp.weixin.qq.com/s/eq_tw8ZEqVZOGEXc5zIjPA&#39;&gt;%E7%82%B9%E6%AD%A4%E8%B7%B3%E8%BD%AC">https://mp.weixin.qq.com/s/eq_tw8ZEqVZOGEXc5zIjPA&#39;&gt;点此跳转</a></a></p>]]></content>
    
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Echarts挤压</title>
    <link href="/2021/02/27/Echarts%E6%8C%A4%E5%8E%8B/"/>
    <url>/2021/02/27/Echarts%E6%8C%A4%E5%8E%8B/</url>
    
    <content type="html"><![CDATA[<p>工作中有时候会遇到ECharts挤压的问题，如下图所示</p><p><img src="data:image/jpeg;base64,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"></p><p>虽然给ECharts图标加了自适应resize方法，但是只有窗口大小发生了改变，图表才会恢复正常，使用浏览器的元素选择器去查看图表的宽高，只有100px了，引起的原因应该是在渲染图表的时候没有获取到容器的宽高，解决的办法是将容器的宽高写成固定值，至于自适应的话，可以用JS动态判断窗口大小赋值宽高。</p>]]></content>
    
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>两栏布局和三栏布局</title>
    <link href="/2021/02/20/%E4%B8%A4%E6%A0%8F%E5%B8%83%E5%B1%80%E5%92%8C%E4%B8%89%E6%A0%8F%E5%B8%83%E5%B1%80/"/>
    <url>/2021/02/20/%E4%B8%A4%E6%A0%8F%E5%B8%83%E5%B1%80%E5%92%8C%E4%B8%89%E6%A0%8F%E5%B8%83%E5%B1%80/</url>
    
    <content type="html"><![CDATA[<p>css中的两栏布局和三栏布局算是比较经典的问题了，今天就来回顾一下这两种布局</p><a id="more"></a><h2 id="1、双栏布局"><a href="#1、双栏布局" class="headerlink" title="1、双栏布局"></a>1、双栏布局</h2><p>双栏布局非常常见，往往是以一个定宽栏和一个自适应的栏并排展示存在</p><p>实现思路也非常的简单：</p><ul><li>使用 float 左浮左边栏</li><li>右边模块使用 margin-left 撑出内容块做内容展示</li><li>为父级元素添加BFC，防止下方元素飞到上方内容</li></ul><p>代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">    <span class="hljs-selector-class">.box</span>&#123;</span><br>        overflow: hidden; 添加BFC<br>    &#125;<br><span class="css">    <span class="hljs-selector-class">.left</span> &#123;</span><br>        float: left;<br>        width: 200px;<br>        background-color: gray;<br>        height: 400px;<br>    &#125;<br><span class="css">    <span class="hljs-selector-class">.right</span> &#123;</span><br>        margin-left: 210px;<br>        background-color: lightgray;<br>        height: 200px;<br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>左边<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>右边<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>还有一种更为简单的使用则是采取：flex弹性布局</p><h3 id="flex弹性布局"><a href="#flex弹性布局" class="headerlink" title="flex弹性布局"></a>flex弹性布局</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">    <span class="hljs-selector-class">.box</span>&#123;</span><br>        display: flex;<br>    &#125;<br><span class="css">    <span class="hljs-selector-class">.left</span> &#123;</span><br>        width: 100px;<br>    &#125;<br><span class="css">    <span class="hljs-selector-class">.right</span> &#123;</span><br>        flex: 1;<br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>左边<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>右边<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>flex</code>可以说是最好的方案了，代码少，使用简单</p><p>注意的是，<code>flex</code>容器的一个默认属性值:<code>align-items: stretch;</code></p><p>这个属性导致了列等高的效果。为了让两个盒子高度自动，需要设置: <code>align-items: flex-start</code></p><h2 id="2、三栏布局"><a href="#2、三栏布局" class="headerlink" title="2、三栏布局"></a>2、三栏布局</h2><p>实现三栏布局中间自适应的布局方式有：</p><ul><li>两边使用 float，中间使用 margin</li><li>两边使用 absolute，中间使用 margin</li><li>两边使用 float 和负 margin</li><li>display: table 实现</li><li>flex实现</li><li>grid网格布局</li></ul><h3 id="两边使用-float，中间使用-margin"><a href="#两边使用-float，中间使用-margin" class="headerlink" title="两边使用 float，中间使用 margin"></a>两边使用 float，中间使用 margin</h3><p>需要将中间的内容放在<code>html</code>结构最后，否则右侧会臣在中间内容的下方</p><p>实现代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">    <span class="hljs-selector-class">.wrap</span> &#123;</span><br><span class="css">        <span class="hljs-selector-tag">background</span>: <span class="hljs-selector-id">#eee</span>;</span><br><span class="xml">        overflow: hidden; <span class="hljs-comment">&lt;!-- 生成BFC，计算高度时考虑浮动的元素 --&gt;</span></span><br>        padding: 20px;<br>        height: 200px;<br>    &#125;<br><span class="css">    <span class="hljs-selector-class">.left</span> &#123;</span><br>        width: 200px;<br>        height: 200px;<br>        float: left;<br>        background: coral;<br>    &#125;<br><span class="css">    <span class="hljs-selector-class">.right</span> &#123;</span><br>        width: 120px;<br>        height: 200px;<br>        float: right;<br>        background: lightblue;<br>    &#125;<br><span class="css">    <span class="hljs-selector-class">.middle</span> &#123;</span><br>        margin-left: 220px;<br>        height: 200px;<br>        background: lightpink;<br>        margin-right: 140px;<br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>左侧<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>右侧<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;middle&quot;</span>&gt;</span>中间<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>原理如下：</p><ul><li>两边固定宽度，中间宽度自适应。</li><li>利用中间元素的margin值控制两边的间距</li><li>宽度小于左右部分宽度之和时，右侧部分会被挤下去</li></ul><p>这种实现方式存在缺陷：</p><ul><li>主体内容是最后加载的。</li><li>右边在主体内容之前，如果是响应式设计，不能简单的换行展示</li></ul><h3 id="两边使用-absolute，中间使用-margin"><a href="#两边使用-absolute，中间使用-margin" class="headerlink" title="两边使用 absolute，中间使用 margin"></a>两边使用 absolute，中间使用 margin</h3><p>基于绝对定位的三栏布局：注意绝对定位的元素脱离文档流，相对于最近的已经定位的祖先元素进行定位。无需考虑HTML中结构的顺序</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-class">.container</span> &#123;</span><br>    position: relative;<br>  &#125;<br>  <br><span class="css">  <span class="hljs-selector-class">.left</span>,</span><br><span class="css">  <span class="hljs-selector-class">.right</span>,</span><br><span class="css">  <span class="hljs-selector-class">.main</span> &#123;</span><br>    height: 200px;<br>    line-height: 200px;<br>    text-align: center;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.left</span> &#123;</span><br>    position: absolute;<br>    top: 0;<br>    left: 0;<br>    width: 100px;<br>    background: green;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.right</span> &#123;</span><br>    position: absolute;<br>    top: 0;<br>    right: 0;<br>    width: 100px;<br>    background: green;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.main</span> &#123;</span><br>    margin: 0 110px;<br>    background: black;<br>    color: white;<br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>左边固定宽度<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>右边固定宽度<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span>中间自适应<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>实现流程：</p><ul><li>左右两边使用绝对定位，固定在两侧。</li><li>中间占满一行，但通过 margin和左右两边留出10px的间隔</li></ul><h3 id="两边使用-float-和负-margin"><a href="#两边使用-float-和负-margin" class="headerlink" title="两边使用 float 和负 margin"></a>两边使用 float 和负 margin</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-class">.left</span>,</span><br><span class="css">  <span class="hljs-selector-class">.right</span>,</span><br><span class="css">  <span class="hljs-selector-class">.main</span> &#123;</span><br>    height: 200px;<br>    line-height: 200px;<br>    text-align: center;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.main-wrapper</span> &#123;</span><br>    float: left;<br>    width: 100%;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.main</span> &#123;</span><br>    margin: 0 110px;<br>    background: black;<br>    color: white;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.left</span>,</span><br><span class="css">  <span class="hljs-selector-class">.right</span> &#123;</span><br>    float: left;<br>    width: 100px;<br>    margin-left: -100%;<br>    background: green;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.right</span> &#123;</span><br><span class="css">    <span class="hljs-selector-tag">margin-left</span>: <span class="hljs-selector-tag">-100px</span>; <span class="hljs-comment">/* 同自身宽度 */</span></span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main-wrapper&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span>中间自适应<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>左边固定宽度<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>右边固定宽度<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>实现过程：</p><ul><li>中间使用了双层标签，外层是浮动的，以便左中右能在同一行展示</li><li>左边通过使用负 margin-left:-100%，相当于中间的宽度，所以向上偏移到左侧</li><li>右边通过使用负 margin-left:-100px，相当于自身宽度，所以向上偏移到最右侧</li></ul><p>缺点：</p><ul><li>增加了 .main-wrapper 一层，结构变复杂</li><li>使用负 margin，调试也相对麻烦</li></ul><h3 id="使用-display-table-实现"><a href="#使用-display-table-实现" class="headerlink" title="使用 display: table 实现"></a>使用 display: table 实现</h3><table> 标签用于展示行列数据，不适合用于布局。但是可以使用 display: table 来实现布局的效果<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-class">.container</span> &#123;</span><br>    height: 200px;<br>    line-height: 200px;<br>    text-align: center;<br>    display: table;<br>    table-layout: fixed;<br>    width: 100%;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.left</span>,</span><br><span class="css">  <span class="hljs-selector-class">.right</span>,</span><br><span class="css">  <span class="hljs-selector-class">.main</span> &#123;</span><br>    display: table-cell;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.left</span>,</span><br><span class="css">  <span class="hljs-selector-class">.right</span> &#123;</span><br>    width: 100px;<br>    background: green;<br>  &#125;<br><br><span class="css">  <span class="hljs-selector-class">.main</span> &#123;</span><br>    background: black;<br>    color: white;<br>    width: 100%;<br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>左边固定宽度<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span>中间自适应<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>右边固定宽度<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>实现原理：</p><ul><li>层通过 display: table设置为表格，设置 table-layout: fixed`表示列宽自身宽度决定，而不是自动计算。</li><li>内层的左中右通过 display: table-cell设置为表格单元。</li><li>左右设置固定宽度，中间设置 width: 100% 填充剩下的宽度</li></ul><h3 id="使用flex实现"><a href="#使用flex实现" class="headerlink" title="使用flex实现"></a>使用flex实现</h3><p>利用<code>flex</code>弹性布局，可以简单实现中间自适应</p><p>代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br><span class="css">    <span class="hljs-selector-class">.wrap</span> &#123;</span><br>        display: flex;<br>        justify-content: space-between;<br>    &#125;<br><br><span class="css">    <span class="hljs-selector-class">.left</span>,</span><br><span class="css">    <span class="hljs-selector-class">.right</span>,</span><br><span class="css">    <span class="hljs-selector-class">.middle</span> &#123;</span><br>        height: 100px;<br>    &#125;<br><br><span class="css">    <span class="hljs-selector-class">.left</span> &#123;</span><br>        width: 200px;<br>        background: coral;<br>    &#125;<br><br><span class="css">    <span class="hljs-selector-class">.right</span> &#123;</span><br>        width: 120px;<br>        background: lightblue;<br>    &#125;<br><br><span class="css">    <span class="hljs-selector-class">.middle</span> &#123;</span><br><span class="css">        <span class="hljs-selector-tag">background</span>: <span class="hljs-selector-id">#555</span>;</span><br>        width: 100%;<br>        margin: 0 20px;<br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>左侧<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;middle&quot;</span>&gt;</span>中间<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>右侧<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>实现过程：</p><ul><li>仅需将容器设置为<code>display:flex;</code>，</li><li>盒内元素两端对其，将中间元素设置为<code>100%</code>宽度，或者设为<code>flex:1</code>，即可填充空白</li><li>盒内元素的高度撑开容器的高度</li></ul><p>优点：</p><ul><li>结构简单直观</li><li>可以结合 flex的其他功能实现更多效果，例如使用 order属性调整显示顺序，让主体内容优先加载，但展示在中间</li></ul><h3 id="grid网格布局"><a href="#grid网格布局" class="headerlink" title="grid网格布局"></a>grid网格布局</h3><p>代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">    <span class="hljs-selector-class">.wrap</span> &#123;</span><br>        display: grid;<br>        width: 100%;<br>        grid-template-columns: 300px auto 300px;<br>    &#125;<br><br><span class="css">    <span class="hljs-selector-class">.left</span>,</span><br><span class="css">    <span class="hljs-selector-class">.right</span>,</span><br><span class="css">    <span class="hljs-selector-class">.middle</span> &#123;</span><br>        height: 100px;<br>    &#125;<br><br><span class="css">    <span class="hljs-selector-class">.left</span> &#123;</span><br>        background: coral;<br>    &#125;<br><br><span class="css">    <span class="hljs-selector-class">.right</span> &#123;</span><br>        width: 300px;<br>        background: lightblue;<br>    &#125;<br><br><span class="css">    <span class="hljs-selector-class">.middle</span> &#123;</span><br><span class="css">        <span class="hljs-selector-tag">background</span>: <span class="hljs-selector-id">#555</span>;</span><br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrap&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>左侧<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;middle&quot;</span>&gt;</span>中间<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>右侧<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>跟<code>flex</code>弹性布局一样的简单</p>]]></content>
    
    
    
    <tags>
      
      <tag>css</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>分页器</title>
    <link href="/2021/02/08/%E5%88%86%E9%A1%B5%E5%99%A8/"/>
    <url>/2021/02/08/%E5%88%86%E9%A1%B5%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<p>  有一个挺常见的需求，就是在关闭弹窗列表的时候清空分页器的信息，但是最近我在实现的时候发现如果清空分页器信息，再次打开时页码没有被选中，需要点一下才能选中，这是DOM没有更新造成的，解决办法就是给分页器加一个v-if，请求时false，请求完在$nextTick方法中再true回来。</p>]]></content>
    
    
    
    <tags>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>js数组方法</title>
    <link href="/2021/02/03/js%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/"/>
    <url>/2021/02/03/js%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>JS中的数组方法有很多，基本可以归纳为增、删、改、查，但需要注意的是，有些方法会对原数组产生影响，有些方法则不会修改原数组，今天就来梳理一下数组方法</p><a id="more"></a><h3 id="增"><a href="#增" class="headerlink" title="增"></a>增</h3><p>下面前三种是对原数组产生影响的增添方法，第四种则不会对原数组产生影响</p><ul><li>push()</li><li>unshift()</li><li>splice()</li><li>concat()</li></ul><h4 id="push"><a href="#push" class="headerlink" title="push()"></a>push()</h4><p><code>push()</code>方法接收任意数量的参数，并将它们添加到数组末尾，返回数组的最新长度</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = []; <span class="hljs-comment">// 创建一个数组</span><br><span class="hljs-keyword">let</span> count = colors.push(<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>); <span class="hljs-comment">// 推入两项</span><br><span class="hljs-built_in">console</span>.log(count) <span class="hljs-comment">// 2</span><br></code></pre></td></tr></table></figure><h4 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a>unshift()</h4><p>unshift()在数组开头添加任意多个值，然后返回新的数组长度</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(); <span class="hljs-comment">// 创建一个数组</span><br><span class="hljs-keyword">let</span> count = colors.unshift(<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>); <span class="hljs-comment">// 从数组开头推入两项</span><br>alert(count); <span class="hljs-comment">// 2</span><br></code></pre></td></tr></table></figure><h4 id="splice"><a href="#splice" class="headerlink" title="splice"></a>splice</h4><p>传入三个参数，分别是开始位置、0（要删除的元素数量）、插入的元素，返回空数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = [<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>, <span class="hljs-string">&quot;blue&quot;</span>];<br><span class="hljs-keyword">let</span> removed = colors.splice(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&quot;yellow&quot;</span>, <span class="hljs-string">&quot;orange&quot;</span>)<br><span class="hljs-built_in">console</span>.log(colors) <span class="hljs-comment">// red,yellow,orange,green,blue</span><br><span class="hljs-built_in">console</span>.log(removed) <span class="hljs-comment">// []</span><br></code></pre></td></tr></table></figure><h4 id="concat"><a href="#concat" class="headerlink" title="concat()"></a>concat()</h4><p>首先会创建一个当前数组的副本，然后再把它的参数添加到副本末尾，最后返回这个新构建的数组，不会影响原始数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = [<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>, <span class="hljs-string">&quot;blue&quot;</span>];<br><span class="hljs-keyword">let</span> colors2 = colors.concat(<span class="hljs-string">&quot;yellow&quot;</span>, [<span class="hljs-string">&quot;black&quot;</span>, <span class="hljs-string">&quot;brown&quot;</span>]);<br><span class="hljs-built_in">console</span>.log(colors); <span class="hljs-comment">// [&quot;red&quot;, &quot;green&quot;,&quot;blue&quot;]</span><br><span class="hljs-built_in">console</span>.log(colors2); <span class="hljs-comment">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;]</span><br></code></pre></td></tr></table></figure><h3 id="删"><a href="#删" class="headerlink" title="删"></a>删</h3><p>下面三种都会影响原数组，最后一项不影响原数组：</p><ul><li>pop()</li><li>shift()</li><li>splice()</li><li>slice()</li></ul><h4 id="pop"><a href="#pop" class="headerlink" title="pop()"></a>pop()</h4><p><code>pop()</code> 方法用于删除数组的最后一项，同时减少数组的<code>length</code> 值，返回被删除的项</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = [<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>]<br><span class="hljs-keyword">let</span> item = colors.pop(); <span class="hljs-comment">// 取得最后一项</span><br><span class="hljs-built_in">console</span>.log(item) <span class="hljs-comment">// green</span><br><span class="hljs-built_in">console</span>.log(colors.length) <span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure><h4 id="shift"><a href="#shift" class="headerlink" title="shift()"></a>shift()</h4><p><code>shift()</code>方法用于删除数组的第一项，同时减少数组的<code>length</code> 值，返回被删除的项</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = [<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>]<br><span class="hljs-keyword">let</span> item = colors.shift(); <span class="hljs-comment">// 取得第一项</span><br><span class="hljs-built_in">console</span>.log(item) <span class="hljs-comment">// red</span><br><span class="hljs-built_in">console</span>.log(colors.length) <span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure><h4 id="splice-1"><a href="#splice-1" class="headerlink" title="splice()"></a>splice()</h4><p>传入两个参数，分别是开始位置，删除元素的数量，返回包含删除元素的数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = [<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>, <span class="hljs-string">&quot;blue&quot;</span>];<br><span class="hljs-keyword">let</span> removed = colors.splice(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>); <span class="hljs-comment">// 删除第一项</span><br><span class="hljs-built_in">console</span>.log(colors); <span class="hljs-comment">// green,blue</span><br><span class="hljs-built_in">console</span>.log(removed); <span class="hljs-comment">// red，只有一个元素的数组</span><br></code></pre></td></tr></table></figure><h4 id="slice"><a href="#slice" class="headerlink" title="slice()"></a>slice()</h4><p>slice() 用于创建一个包含原有数组中一个或多个元素的新数组，不会影响原始数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = [<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>, <span class="hljs-string">&quot;blue&quot;</span>, <span class="hljs-string">&quot;yellow&quot;</span>, <span class="hljs-string">&quot;purple&quot;</span>];<br><span class="hljs-keyword">let</span> colors2 = colors.slice(<span class="hljs-number">1</span>);<br><span class="hljs-keyword">let</span> colors3 = colors.slice(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>);<br><span class="hljs-built_in">console</span>.log(colors)   <span class="hljs-comment">// red,green,blue,yellow,purple</span><br>concole.log(colors2); <span class="hljs-comment">// green,blue,yellow,purple</span><br>concole.log(colors3); <span class="hljs-comment">// green,blue,yellow</span><br></code></pre></td></tr></table></figure><h3 id="改"><a href="#改" class="headerlink" title="改"></a>改</h3><p>即修改原来数组的内容，常用<code>splice</code></p><h4 id="splice-2"><a href="#splice-2" class="headerlink" title="splice()"></a>splice()</h4><p>传入三个参数，分别是开始位置，要删除元素的数量，要插入的任意多个元素，返回删除元素的数组，对原数组产生影响</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = [<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>, <span class="hljs-string">&quot;blue&quot;</span>];<br><span class="hljs-keyword">let</span> removed = colors.splice(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;purple&quot;</span>); <span class="hljs-comment">// 插入两个值，删除一个元素</span><br><span class="hljs-built_in">console</span>.log(colors); <span class="hljs-comment">// red,red,purple,blue</span><br><span class="hljs-built_in">console</span>.log(removed); <span class="hljs-comment">// green，只有一个元素的数组</span><br></code></pre></td></tr></table></figure><h3 id="查"><a href="#查" class="headerlink" title="查"></a>查</h3><p>即查找元素，返回元素坐标或者元素值</p><ul><li>indexOf()</li><li>includes()</li><li>find()</li></ul><h4 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a>indexOf()</h4><p>返回要查找的元素在数组中的位置，如果没找到则返回1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>];<br>numbers.indexOf(<span class="hljs-number">4</span>) <span class="hljs-comment">// 3</span><br></code></pre></td></tr></table></figure><h4 id="includes"><a href="#includes" class="headerlink" title="includes()"></a>includes()</h4><p>返回要查找的元素在数组中的位置，找到返回<code>true</code>，否则<code>false</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>];<br>numbers.includes(<span class="hljs-number">4</span>) <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><h4 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h4><p>返回第一个匹配的元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> people = [<br>    &#123;<br>        name: <span class="hljs-string">&quot;Matt&quot;</span>,<br>        age: <span class="hljs-number">27</span><br>    &#125;,<br>    &#123;<br>        name: <span class="hljs-string">&quot;Nicholas&quot;</span>,<br>        age: <span class="hljs-number">29</span><br>    &#125;<br>];<br>people.find(<span class="hljs-function">(<span class="hljs-params">element, index, array</span>) =&gt;</span> element.age &lt; <span class="hljs-number">28</span>) <span class="hljs-comment">// // &#123;name: &quot;Matt&quot;, age: 27&#125;</span><br></code></pre></td></tr></table></figure><h2 id="二、排序方法"><a href="#二、排序方法" class="headerlink" title="二、排序方法"></a>二、排序方法</h2><p>数组有两个方法可以用来对元素重新排序：</p><ul><li>reverse()</li><li>sort()</li></ul><h3 id="reverse"><a href="#reverse" class="headerlink" title="reverse()"></a>reverse()</h3><p>顾名思义，将数组元素方向排列</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> values = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br>values.reverse();<br>alert(values); <span class="hljs-comment">// 5,4,3,2,1</span><br></code></pre></td></tr></table></figure><h3 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h3><p>sort()方法接受一个比较函数，用于判断哪个值应该排在前面</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span>(<span class="hljs-params">value1, value2</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (value1 &lt; value2) &#123;<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value1 &gt; value2) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> values = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">15</span>];<br>values.sort(compare);<br>alert(values); <span class="hljs-comment">// 0,1,5,10,15</span><br></code></pre></td></tr></table></figure><h2 id="三、转换方法"><a href="#三、转换方法" class="headerlink" title="三、转换方法"></a>三、转换方法</h2><p>常见的转换方法有：</p><h3 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h3><p>join() 方法接收一个参数，即字符串分隔符，返回包含所有项的字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> colors = [<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;green&quot;</span>, <span class="hljs-string">&quot;blue&quot;</span>];<br>alert(colors.join(<span class="hljs-string">&quot;,&quot;</span>)); <span class="hljs-comment">// red,green,blue</span><br>alert(colors.join(<span class="hljs-string">&quot;||&quot;</span>)); <span class="hljs-comment">// red||green||blue</span><br></code></pre></td></tr></table></figure><h2 id="四、迭代方法"><a href="#四、迭代方法" class="headerlink" title="四、迭代方法"></a>四、迭代方法</h2><p>常用来迭代数组的方法（都不改变原数组）有如下：</p><ul><li>some()</li><li>every()</li><li>forEach()</li><li>filter()</li><li>map()</li></ul><h3 id="some"><a href="#some" class="headerlink" title="some()"></a>some()</h3><p>对数组每一项都运行传入的函数，如果有一项函数返回 true ，则这个方法返回 true</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>];<br><span class="hljs-keyword">let</span> someResult = numbers.every(<span class="hljs-function">(<span class="hljs-params">item, index, array</span>) =&gt;</span> item &gt; <span class="hljs-number">2</span>);<br><span class="hljs-built_in">console</span>.log(someResult) <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><h3 id="every"><a href="#every" class="headerlink" title="every()"></a>every()</h3><p>对数组每一项都运行传入的函数，如果对每一项函数都返回 true ，则这个方法返回 true</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>];<br><span class="hljs-keyword">let</span> everyResult = numbers.every(<span class="hljs-function">(<span class="hljs-params">item, index, array</span>) =&gt;</span> item &gt; <span class="hljs-number">2</span>);<br><span class="hljs-built_in">console</span>.log(everyResult) <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure><h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h3><p>对数组每一项都运行传入的函数，没有返回值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>];<br>numbers.forEach(<span class="hljs-function">(<span class="hljs-params">item, index, array</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 执行某些操作</span><br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h3><p>对数组每一项都运行传入的函数，函数返回 <code>true</code> 的项会组成数组之后返回</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>];<br><span class="hljs-keyword">let</span> filterResult = numbers.filter(<span class="hljs-function">(<span class="hljs-params">item, index, array</span>) =&gt;</span> item &gt; <span class="hljs-number">2</span>);<br><span class="hljs-built_in">console</span>.log(filterResult); <span class="hljs-comment">// 3,4,5,4,3</span><br></code></pre></td></tr></table></figure><h3 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h3><p>对数组每一项都运行传入的函数，返回由每次函数调用的结果构成的数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>];<br><span class="hljs-keyword">let</span> mapResult = numbers.map(<span class="hljs-function">(<span class="hljs-params">item, index, array</span>) =&gt;</span> item * <span class="hljs-number">2</span>);<br><span class="hljs-built_in">console</span>.log(mapResult) <span class="hljs-comment">// 2,4,6,8,10,8,6,4,2</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VUE部署404</title>
    <link href="/2021/01/21/VUE%E9%83%A8%E7%BD%B2404/"/>
    <url>/2021/01/21/VUE%E9%83%A8%E7%BD%B2404/</url>
    
    <content type="html"><![CDATA[<p>vue项目打包后部署遇到404一个经典的问题，相信很多同学都有遇到过</p><a id="more"></a><p>我们先还原一下场景：</p><ul><li><code>vue</code>项目在本地时运行正常，但部署到服务器中，刷新页面，出现了404错误</li></ul><p>先定位一下，HTTP 404 错误意味着链接指向的资源不存在</p><p>问题在于为什么不存在？且为什么只有<code>history</code>模式下会出现这个问题？</p><h3 id="为什么history模式下有问题"><a href="#为什么history模式下有问题" class="headerlink" title="为什么history模式下有问题"></a>为什么history模式下有问题</h3><p><code>Vue</code>是属于单页应用（single-page application）</p><p>而<code>SPA</code>是一种网络应用程序或网站的模型，所有用户交互是通过动态重写当前页面，前面我们也看到了，不管我们应用有多少页面，构建物都只会产出一个<code>index.html</code></p><p>现在，我们回头来看一下我们的<code>nginx</code>配置</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>  <span class="hljs-attribute">listen</span>  <span class="hljs-number">80</span>;<br>  <span class="hljs-attribute">server_name</span>  www.xxx.com;<br><br>  <span class="hljs-attribute">location</span> / &#123;<br>    <span class="hljs-attribute">index</span>  /data/dist/index.html;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>可以根据 <code>nginx</code> 配置得出，当我们在地址栏输入 <code>www.xxx.com</code> 时，这时会打开我们 <code>dist</code>目录下的 <code>index.html</code> 文件，然后我们在跳转路由进入到 <code>www.xxx.com/login</code></p><p>关键在这里，当我们在 <code>website.com/login</code> 页执行刷新操作，<code>nginx location</code> 是没有相关配置的，所以就会出现 404 的情况</p><h3 id="为什么hash模式下没有问题"><a href="#为什么hash模式下没有问题" class="headerlink" title="为什么hash模式下没有问题"></a>为什么hash模式下没有问题</h3><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">router hash` 模式我们都知道是用符号#表示的，如  `website.com/#/login`, `hash` 的值为`#/login<br></code></pre></td></tr></table></figure><p>它的特点在于：<code>hash</code> 虽然出现在 <code>URL</code> 中，但不会被包括在 <code>HTTP</code> 请求中，对服务端完全没有影响，因此改变 <code>hash</code> 不会重新加载页面</p><p><code>hash</code> 模式下，仅 <code>hash</code> 符号之前的内容会被包含在请求中，如 <code>website.com/#/login</code> 只有<code>website.com</code> 会被包含在请求中 ，因此对于服务端来说，即使没有配置<code>location</code>，也不会返回404错误</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>看到这里我相信大部分同学都能想到怎么解决问题了，</p><p>产生问题的本质是因为我们的路由是通过JS来执行视图切换的，</p><p>当我们进入到子路由时刷新页面，<code>web</code>容器没有相对应的页面此时会出现404</p><p>所以我们只需要配置将任意页面都重定向到 <code>index.html</code>，把路由交由前端处理</p><p>对<code>nginx</code>配置文件<code>.conf</code>修改，添加<code>try_files $uri $uri/ /index.html;</code></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>  <span class="hljs-attribute">listen</span>  <span class="hljs-number">80</span>;<br>  <span class="hljs-attribute">server_name</span>  www.xxx.com;<br><br>  <span class="hljs-attribute">location</span> / &#123;<br>    <span class="hljs-attribute">index</span>  /data/dist/index.html;<br>    <span class="hljs-attribute">try_files</span> $uri $uri/ /index.html;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>修改完配置文件后记得配置的更新</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">nginx -s reload</span><br></code></pre></td></tr></table></figure><p>这么做以后，你的服务器就不再返回 404 错误页面，因为对于所有路径都会返回 <code>index.html</code>文件</p><p>为了避免这种情况，你应该在 <code>Vue</code> 应用里面覆盖所有的路由情况，然后在给出一个 404 页面</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">const</span> router = new VueRouter(&#123;<br>  mode: &#x27;history&#x27;,<br>  routes: [<br>    &#123; path: &#x27;*&#x27;, component: NotFoundComponent &#125;<br>  ]<br>&#125;)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue中的Axios</title>
    <link href="/2021/01/19/Vue%E4%B8%AD%E7%9A%84Axios/"/>
    <url>/2021/01/19/Vue%E4%B8%AD%E7%9A%84Axios/</url>
    
    <content type="html"><![CDATA[<p>Axios相信使用vue的同学们都不陌生，今天就来梳理下axios相关的内容</p><a id="more"></a><h2 id="一、axios的使用"><a href="#一、axios的使用" class="headerlink" title="一、axios的使用"></a>一、axios的使用</h2><p><strong>发送请求</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span>;<br><br>axios(config) <span class="hljs-comment">// 直接传入配置</span><br>axios(url[, config]) <span class="hljs-comment">// 传入url和配置</span><br>axios[method](url[, option]) <span class="hljs-comment">// 直接调用请求方式方法，传入url和配置</span><br>axios[method](url[, data[, option]]) <span class="hljs-comment">// 直接调用请求方式方法，传入data、url和配置</span><br>axios.request(option) <span class="hljs-comment">// 调用 request 方法</span><br><br><span class="hljs-keyword">const</span> axiosInstance = axios.create(config)<br><span class="hljs-comment">// axiosInstance 也具有以上 axios 的能力</span><br><br>axios.all([axiosInstance1, axiosInstance2]).then(axios.spread(response1, response2))<br><span class="hljs-comment">// 调用 all 和传入 spread 回调</span><br></code></pre></td></tr></table></figure><p><strong>请求拦截器</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.interceptors.request.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>&#123;<br>    <span class="hljs-comment">// 这里写发送请求前处理的代码</span><br>    <span class="hljs-keyword">return</span> config;<br>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>&#123;<br>    <span class="hljs-comment">// 这里写发送请求错误相关的代码</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>响应拦截器</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.interceptors.response.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>&#123;<br>    <span class="hljs-comment">// 这里写得到响应数据后处理的代码</span><br>    <span class="hljs-keyword">return</span> response;<br>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>&#123;<br>    <span class="hljs-comment">// 这里写得到错误响应处理的代码</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>取消请求</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 方式一</span><br><span class="hljs-keyword">const</span> CancelToken = axios.CancelToken;<br><span class="hljs-keyword">const</span> source = CancelToken.source();<br><br>axios.get(<span class="hljs-string">&#x27;xxxx&#x27;</span>, &#123;<br>  cancelToken: source.token<br>&#125;)<br><span class="hljs-comment">// 取消请求 (请求原因是可选的)</span><br>source.cancel(<span class="hljs-string">&#x27;主动取消请求&#x27;</span>);<br><br><span class="hljs-comment">// 方式二</span><br><span class="hljs-keyword">const</span> CancelToken = axios.CancelToken;<br><span class="hljs-keyword">let</span> cancel;<br><br>axios.get(<span class="hljs-string">&#x27;xxxx&#x27;</span>, &#123;<br>  cancelToken: <span class="hljs-keyword">new</span> CancelToken(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">executor</span>(<span class="hljs-params">c</span>) </span>&#123;<br>    cancel = c;<br>  &#125;)<br>&#125;);<br>cancel(<span class="hljs-string">&#x27;主动取消请求&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="二、实现一个简易版axios"><a href="#二、实现一个简易版axios" class="headerlink" title="二、实现一个简易版axios"></a>二、实现一个简易版axios</h2><p>构建一个<code>Axios</code>构造函数，核心代码为<code>request</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Axios</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-title">request</span>(<span class="hljs-params">config</span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;<br>            <span class="hljs-keyword">const</span> &#123;url = <span class="hljs-string">&#x27;&#x27;</span>, method = <span class="hljs-string">&#x27;get&#x27;</span>, data = &#123;&#125;&#125; = config;<br>            <span class="hljs-comment">// 发送ajax请求</span><br>            <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();<br>            xhr.open(method, url, <span class="hljs-literal">true</span>);<br>            xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>                <span class="hljs-built_in">console</span>.log(xhr.responseText)<br>                resolve(xhr.responseText);<br>            &#125;<br>            xhr.send(data);<br>        &#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>导出<code>axios</code>实例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 最终导出axios的方法，即实例的request方法</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateAxiosFn</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> axios = <span class="hljs-keyword">new</span> Axios();<br>    <span class="hljs-keyword">let</span> req = axios.request.bind(axios);<br>    <span class="hljs-keyword">return</span> req;<br>&#125;<br><br><span class="hljs-comment">// 得到最后的全局变量axios</span><br><span class="hljs-keyword">let</span> axios = CreateAxiosFn();<br></code></pre></td></tr></table></figure><p>上述就已经能够实现<code>axios(&#123; &#125;)</code>这种方式的请求</p><p>下面是来实现下<code>axios.method()</code>这种形式的请求</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 定义get,post...方法，挂在到Axios原型上</span><br><span class="hljs-keyword">const</span> methodsArr = [<span class="hljs-string">&#x27;get&#x27;</span>, <span class="hljs-string">&#x27;delete&#x27;</span>, <span class="hljs-string">&#x27;head&#x27;</span>, <span class="hljs-string">&#x27;options&#x27;</span>, <span class="hljs-string">&#x27;put&#x27;</span>, <span class="hljs-string">&#x27;patch&#x27;</span>, <span class="hljs-string">&#x27;post&#x27;</span>];<br>methodsArr.forEach(<span class="hljs-function"><span class="hljs-params">met</span> =&gt;</span> &#123;<br>    Axios.prototype[met] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;执行&#x27;</span>+met+<span class="hljs-string">&#x27;方法&#x27;</span>);<br>        <span class="hljs-comment">// 处理单个方法</span><br>        <span class="hljs-keyword">if</span> ([<span class="hljs-string">&#x27;get&#x27;</span>, <span class="hljs-string">&#x27;delete&#x27;</span>, <span class="hljs-string">&#x27;head&#x27;</span>, <span class="hljs-string">&#x27;options&#x27;</span>].includes(met)) &#123; <span class="hljs-comment">// 2个参数(url[, config])</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.request(&#123;<br>                method: met,<br>                url: <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>],<br>                ...arguments[<span class="hljs-number">1</span>] || &#123;&#125;<br>            &#125;)<br>        &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// 3个参数(url[,data[,config]])</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.request(&#123;<br>                method: met,<br>                url: <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>],<br>                data: <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] || &#123;&#125;,<br>                ...arguments[<span class="hljs-number">2</span>] || &#123;&#125;<br>            &#125;)<br>        &#125;<br><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>将<code>Axios.prototype</code>上的方法搬运到<code>request</code>上</p><p>首先实现个工具类，实现将<code>b</code>方法混入到<code>a</code>，并且修改<code>this</code>指向</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> utils = &#123;<br>  <span class="hljs-function"><span class="hljs-title">extend</span>(<span class="hljs-params">a,b, context</span>)</span> &#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> b) &#123;<br>      <span class="hljs-keyword">if</span> (b.hasOwnProperty(key)) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> b[key] === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>          a[key] = b[key].bind(context);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          a[key] = b[key]<br>        &#125;<br>      &#125;<br>      <br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>修改导出的方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateAxiosFn</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> axios = <span class="hljs-keyword">new</span> Axios();<br>  <br>  <span class="hljs-keyword">let</span> req = axios.request.bind(axios);<br>  <span class="hljs-comment">// 增加代码</span><br>  utils.extend(req, Axios.prototype, axios)<br>  <br>  <span class="hljs-keyword">return</span> req;<br>&#125;<br></code></pre></td></tr></table></figure><p>构建拦截器的构造函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InterceptorsManage</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.handlers = [];<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">use</span>(<span class="hljs-params">fullfield, rejected</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.handlers.push(&#123;<br>      fullfield,<br>      rejected<br>    &#125;)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>实现<code>axios.interceptors.response.use</code>和<code>axios.interceptors.request.use</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Axios</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>        <span class="hljs-comment">// 新增代码</span><br>        <span class="hljs-built_in">this</span>.interceptors = &#123;<br>            request: <span class="hljs-keyword">new</span> InterceptorsManage,<br>            response: <span class="hljs-keyword">new</span> InterceptorsManage<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-title">request</span>(<span class="hljs-params">config</span>)</span> &#123;<br>   ...<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>执行语句<code>axios.interceptors.response.use</code>和<code>axios.interceptors.request.use</code>的时候，实现获取<code>axios</code>实例上的<code>interceptors</code>对象，然后再获取<code>response</code>或<code>request</code>拦截器，再执行对应的拦截器的<code>use</code>方法</p><p>把<code>Axios</code>上的方法和属性搬到<code>request</code>过去</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateAxiosFn</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> axios = <span class="hljs-keyword">new</span> Axios();<br>  <br>  <span class="hljs-keyword">let</span> req = axios.request.bind(axios);<br>  <span class="hljs-comment">// 混入方法， 处理axios的request方法，使之拥有get,post...方法</span><br>  utils.extend(req, Axios.prototype, axios)<br>  <span class="hljs-comment">// 新增代码</span><br>  utils.extend(req, axios)<br>  <span class="hljs-keyword">return</span> req;<br>&#125;<br></code></pre></td></tr></table></figure><p>现在<code>request</code>也有了<code>interceptors</code>对象，在发送请求的时候，会先获取<code>request</code>拦截器的<code>handlers</code>的方法来执行</p><p>首先将执行<code>ajax</code>的请求封装成一个方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">request</span>(<span class="hljs-params">config</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.sendAjax(config)<br>&#125;<br><span class="hljs-function"><span class="hljs-title">sendAjax</span>(<span class="hljs-params">config</span>)</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> &#123;url = <span class="hljs-string">&#x27;&#x27;</span>, method = <span class="hljs-string">&#x27;get&#x27;</span>, data = &#123;&#125;&#125; = config;<br>        <span class="hljs-comment">// 发送ajax请求</span><br>        <span class="hljs-built_in">console</span>.log(config);<br>        <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();<br>        xhr.open(method, url, <span class="hljs-literal">true</span>);<br>        xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>            <span class="hljs-built_in">console</span>.log(xhr.responseText)<br>            resolve(xhr.responseText);<br>        &#125;;<br>        xhr.send(data);<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>获得<code>handlers</code>中的回调</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">request</span>(<span class="hljs-params">config</span>)</span> &#123;<br>    <span class="hljs-comment">// 拦截器和请求组装队列</span><br>    <span class="hljs-keyword">let</span> chain = [<span class="hljs-built_in">this</span>.sendAjax.bind(<span class="hljs-built_in">this</span>), <span class="hljs-literal">undefined</span>] <span class="hljs-comment">// 成对出现的，失败回调暂时不处理</span><br><br>    <span class="hljs-comment">// 请求拦截</span><br>    <span class="hljs-built_in">this</span>.interceptors.request.handlers.forEach(<span class="hljs-function"><span class="hljs-params">interceptor</span> =&gt;</span> &#123;<br>        chain.unshift(interceptor.fullfield, interceptor.rejected)<br>    &#125;)<br><br>    <span class="hljs-comment">// 响应拦截</span><br>    <span class="hljs-built_in">this</span>.interceptors.response.handlers.forEach(<span class="hljs-function"><span class="hljs-params">interceptor</span> =&gt;</span> &#123;<br>        chain.push(interceptor.fullfield, interceptor.rejected)<br>    &#125;)<br><br>    <span class="hljs-comment">// 执行队列，每次执行一对，并给promise赋最新的值</span><br>    <span class="hljs-keyword">let</span> promise = <span class="hljs-built_in">Promise</span>.resolve(config);<br>    <span class="hljs-keyword">while</span>(chain.length &gt; <span class="hljs-number">0</span>) &#123;<br>        promise = promise.then(chain.shift(), chain.shift())<br>    &#125;<br>    <span class="hljs-keyword">return</span> promise;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>chains</code>大概是<code>[&#39;fulfilled1&#39;,&#39;reject1&#39;,&#39;fulfilled2&#39;,&#39;reject2&#39;,&#39;this.sendAjax&#39;,&#39;undefined&#39;,&#39;fulfilled2&#39;,&#39;reject2&#39;,&#39;fulfilled1&#39;,&#39;reject1&#39;]</code>这种形式</p><p>这样就能够成功实现一个简易版<code>axios</code></p><h2 id="三、源码分析"><a href="#三、源码分析" class="headerlink" title="三、源码分析"></a>三、源码分析</h2><p>首先看看目录结构</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/gH31uF9VIibTq4A3MP8ICtvXxpFuMa3h5HHWYEMWbtxgtsXuDo50XTWuiapOxEglMkpxl0a1kyV3qVy37WvP49icw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs js">axios<span class="hljs-string">`发送请求有很多实现的方法，实现入口文件为`</span>axios.js<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createInstance</span>(<span class="hljs-params">defaultConfig</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> Axios(defaultConfig);<br><br>  <span class="hljs-comment">// instance指向了request方法，且上下文指向context，所以可以直接以 instance(option) 方式调用 </span><br>  <span class="hljs-comment">// Axios.prototype.request 内对第一个参数的数据类型判断，使我们能够以 instance(url, option) 方式调用</span><br>  <span class="hljs-keyword">var</span> instance = bind(Axios.prototype.request, context);<br><br>  <span class="hljs-comment">// 把Axios.prototype上的方法扩展到instance对象上，</span><br>  <span class="hljs-comment">// 并指定上下文为context，这样执行Axios原型链上的方法时，this会指向context</span><br>  utils.extend(instance, Axios.prototype, context);<br><br>  <span class="hljs-comment">// Copy context to instance</span><br>  <span class="hljs-comment">// 把context对象上的自身属性和方法扩展到instance上</span><br>  <span class="hljs-comment">// 注：因为extend内部使用的forEach方法对对象做for in 遍历时，只遍历对象本身的属性，而不会遍历原型链上的属性</span><br>  <span class="hljs-comment">// 这样，instance 就有了  defaults、interceptors 属性。</span><br>  utils.extend(instance, context);<br>  <span class="hljs-keyword">return</span> instance;<br>&#125;<br><br><span class="hljs-comment">// Create the default instance to be exported 创建一个由默认配置生成的axios实例</span><br><span class="hljs-keyword">var</span> axios = createInstance(defaults);<br><br><span class="hljs-comment">// Factory for creating new instances 扩展axios.create工厂函数，内部也是 createInstance</span><br>axios.create = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span>(<span class="hljs-params">instanceConfig</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> createInstance(mergeConfig(axios.defaults, instanceConfig));<br>&#125;;<br><br><span class="hljs-comment">// Expose all/spread</span><br>axios.all = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">all</span>(<span class="hljs-params">promises</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(promises);<br>&#125;;<br><br>axios.spread = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">spread</span>(<span class="hljs-params">callback</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrap</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> callback.apply(<span class="hljs-literal">null</span>, arr);<br>  &#125;;<br>&#125;;<br><span class="hljs-built_in">module</span>.exports = axios;<br></code></pre></td></tr></table></figure><p>主要核心是 <code>Axios.prototype.request</code>，各种请求方式的调用实现都是在 <code>request</code> 内部实现的， 简单看下 <code>request</code> 的逻辑</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs js">Axios.prototype.request = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>(<span class="hljs-params">config</span>) </span>&#123;<br>  <span class="hljs-comment">// Allow for axios(&#x27;example/url&#x27;[, config]) a la fetch API</span><br>  <span class="hljs-comment">// 判断 config 参数是否是 字符串，如果是则认为第一个参数是 URL，第二个参数是真正的config</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> config === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>    config = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] || &#123;&#125;;<br>    <span class="hljs-comment">// 把 url 放置到 config 对象中，便于之后的 mergeConfig</span><br>    config.url = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// 如果 config 参数是否是 字符串，则整体都当做config</span><br>    config = config || &#123;&#125;;<br>  &#125;<br>  <span class="hljs-comment">// 合并默认配置和传入的配置</span><br>  config = mergeConfig(<span class="hljs-built_in">this</span>.defaults, config);<br>  <span class="hljs-comment">// 设置请求方法</span><br>  config.method = config.method ? config.method.toLowerCase() : <span class="hljs-string">&#x27;get&#x27;</span>;<br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment">    something... 此部分会在后续拦截器单独讲述</span><br><span class="hljs-comment">  */</span><br>&#125;;<br><br><span class="hljs-comment">// 在 Axios 原型上挂载 &#x27;delete&#x27;, &#x27;get&#x27;, &#x27;head&#x27;, &#x27;options&#x27; 且不传参的请求方法，实现内部也是 request</span><br>utils.forEach([<span class="hljs-string">&#x27;delete&#x27;</span>, <span class="hljs-string">&#x27;get&#x27;</span>, <span class="hljs-string">&#x27;head&#x27;</span>, <span class="hljs-string">&#x27;options&#x27;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forEachMethodNoData</span>(<span class="hljs-params">method</span>) </span>&#123;<br>  Axios.prototype[method] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, config</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.request(utils.merge(config || &#123;&#125;, &#123;<br>      method: method,<br>      url: url<br>    &#125;));<br>  &#125;;<br>&#125;);<br><br><span class="hljs-comment">// 在 Axios 原型上挂载 &#x27;post&#x27;, &#x27;put&#x27;, &#x27;patch&#x27; 且传参的请求方法，实现内部同样也是 request</span><br>utils.forEach([<span class="hljs-string">&#x27;post&#x27;</span>, <span class="hljs-string">&#x27;put&#x27;</span>, <span class="hljs-string">&#x27;patch&#x27;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forEachMethodWithData</span>(<span class="hljs-params">method</span>) </span>&#123;<br>  Axios.prototype[method] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, data, config</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.request(utils.merge(config || &#123;&#125;, &#123;<br>      method: method,<br>      url: url,<br>      data: data<br>    &#125;));<br>  &#125;;<br>&#125;);<br></code></pre></td></tr></table></figure><p><code>request</code>入口参数为<code>config</code>，可以说<code>config</code>贯彻了<code>axios</code>的一生</p><p><code>axios</code> 中的 <code>config</code>主要分布在这几个地方：</p><ul><li>默认配置 <code>defaults.js</code></li><li><code>config.method</code>默认为 <code>get</code></li><li>调用 <code>createInstance</code> 方法创建 <code>axios</code>实例，传入的<code>config</code></li><li>直接或间接调用 <code>request</code> 方法，传入的 <code>config</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// axios.js</span><br><span class="hljs-comment">// 创建一个由默认配置生成的axios实例</span><br><span class="hljs-keyword">var</span> axios = createInstance(defaults);<br><br><span class="hljs-comment">// 扩展axios.create工厂函数，内部也是 createInstance</span><br>axios.create = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span>(<span class="hljs-params">instanceConfig</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> createInstance(mergeConfig(axios.defaults, instanceConfig));<br>&#125;;<br><br><span class="hljs-comment">// Axios.js</span><br><span class="hljs-comment">// 合并默认配置和传入的配置</span><br>config = mergeConfig(<span class="hljs-built_in">this</span>.defaults, config);<br><span class="hljs-comment">// 设置请求方法</span><br>config.method = config.method ? config.method.toLowerCase() : <span class="hljs-string">&#x27;get&#x27;</span>;<br></code></pre></td></tr></table></figure><p>从源码中，可以看到优先级：默认配置对象<code>default</code> &lt; <code>method:get</code> &lt; <code>Axios</code>的实例属性<code>this.default</code> &lt; <code>request</code>参数</p><p>下面重点看看<code>request</code>方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js">Axios.prototype.request = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>(<span class="hljs-params">config</span>) </span>&#123;<br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment">    先是 mergeConfig ... 等，不再阐述</span><br><span class="hljs-comment">  */</span><br>  <span class="hljs-comment">// Hook up interceptors middleware 创建拦截器链. dispatchRequest 是重中之重，后续重点</span><br>  <span class="hljs-keyword">var</span> chain = [dispatchRequest, <span class="hljs-literal">undefined</span>];<br><br>  <span class="hljs-comment">// push各个拦截器方法 注意：interceptor.fulfilled 或 interceptor.rejected 是可能为undefined</span><br>  <span class="hljs-built_in">this</span>.interceptors.request.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unshiftRequestInterceptors</span>(<span class="hljs-params">interceptor</span>) </span>&#123;<br>    <span class="hljs-comment">// 请求拦截器逆序 注意此处的 forEach 是自定义的拦截器的forEach方法</span><br>    chain.unshift(interceptor.fulfilled, interceptor.rejected);<br>  &#125;);<br><br>  <span class="hljs-built_in">this</span>.interceptors.response.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pushResponseInterceptors</span>(<span class="hljs-params">interceptor</span>) </span>&#123;<br>    <span class="hljs-comment">// 响应拦截器顺序 注意此处的 forEach 是自定义的拦截器的forEach方法</span><br>    chain.push(interceptor.fulfilled, interceptor.rejected);<br>  &#125;);<br><br>  <span class="hljs-comment">// 初始化一个promise对象，状态为resolved，接收到的参数为已经处理合并过的config对象</span><br>  <span class="hljs-keyword">var</span> promise = <span class="hljs-built_in">Promise</span>.resolve(config);<br><br>  <span class="hljs-comment">// 循环拦截器的链</span><br>  <span class="hljs-keyword">while</span> (chain.length) &#123;<br>    promise = promise.then(chain.shift(), chain.shift()); <span class="hljs-comment">// 每一次向外弹出拦截器</span><br>  &#125;<br>  <span class="hljs-comment">// 返回 promise</span><br>  <span class="hljs-keyword">return</span> promise;<br>&#125;;<br></code></pre></td></tr></table></figure><p>拦截器<code>interceptors</code>是在构建<code>axios</code>实例化的属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Axios</span>(<span class="hljs-params">instanceConfig</span>) </span>&#123;<br>  <span class="hljs-built_in">this</span>.defaults = instanceConfig;<br>  <span class="hljs-built_in">this</span>.interceptors = &#123;<br>    request: <span class="hljs-keyword">new</span> InterceptorManager(), <span class="hljs-comment">// 请求拦截</span><br>    response: <span class="hljs-keyword">new</span> InterceptorManager() <span class="hljs-comment">// 响应拦截</span><br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>InterceptorManager</code>构造函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 拦截器的初始化 其实就是一组钩子函数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">InterceptorManager</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">this</span>.handlers = [];<br>&#125;<br><br><span class="hljs-comment">// 调用拦截器实例的use时就是往钩子函数中push方法</span><br>InterceptorManager.prototype.use = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">use</span>(<span class="hljs-params">fulfilled, rejected</span>) </span>&#123;<br>  <span class="hljs-built_in">this</span>.handlers.push(&#123;<br>    fulfilled: fulfilled,<br>    rejected: rejected<br>  &#125;);<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.handlers.length - <span class="hljs-number">1</span>;<br>&#125;;<br><br><span class="hljs-comment">// 拦截器是可以取消的，根据use的时候返回的ID，把某一个拦截器方法置为null</span><br><span class="hljs-comment">// 不能用 splice 或者 slice 的原因是 删除之后 id 就会变化，导致之后的顺序或者是操作不可控</span><br>InterceptorManager.prototype.eject = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eject</span>(<span class="hljs-params">id</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.handlers[id]) &#123;<br>    <span class="hljs-built_in">this</span>.handlers[id] = <span class="hljs-literal">null</span>;<br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">// 这就是在 Axios的request方法中 中循环拦截器的方法 forEach 循环执行钩子函数</span><br>InterceptorManager.prototype.forEach = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forEach</span>(<span class="hljs-params">fn</span>) </span>&#123;<br>  utils.forEach(<span class="hljs-built_in">this</span>.handlers, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forEachHandler</span>(<span class="hljs-params">h</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (h !== <span class="hljs-literal">null</span>) &#123;<br>      fn(h);<br>    &#125;<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>请求拦截器方法是被 <code>unshift</code>到拦截器中，响应拦截器是被<code>push</code>到拦截器中的。最终它们会拼接上一个叫<code>dispatchRequest</code>的方法被后续的 <code>promise</code> 顺序执行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> utils = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./../utils&#x27;</span>);<br><span class="hljs-keyword">var</span> transformData = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./transformData&#x27;</span>);<br><span class="hljs-keyword">var</span> isCancel = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../cancel/isCancel&#x27;</span>);<br><span class="hljs-keyword">var</span> defaults = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../defaults&#x27;</span>);<br><span class="hljs-keyword">var</span> isAbsoluteURL = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./../helpers/isAbsoluteURL&#x27;</span>);<br><span class="hljs-keyword">var</span> combineURLs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./../helpers/combineURLs&#x27;</span>);<br><br><span class="hljs-comment">// 判断请求是否已被取消，如果已经被取消，抛出已取消</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throwIfCancellationRequested</span>(<span class="hljs-params">config</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (config.cancelToken) &#123;<br>    config.cancelToken.throwIfRequested();<br>  &#125;<br>&#125;<br><br><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dispatchRequest</span>(<span class="hljs-params">config</span>) </span>&#123;<br>  throwIfCancellationRequested(config);<br><br>  <span class="hljs-comment">// 如果包含baseUrl, 并且不是config.url绝对路径，组合baseUrl以及config.url</span><br>  <span class="hljs-keyword">if</span> (config.baseURL &amp;&amp; !isAbsoluteURL(config.url)) &#123;<br>    <span class="hljs-comment">// 组合baseURL与url形成完整的请求路径</span><br>    config.url = combineURLs(config.baseURL, config.url);<br>  &#125;<br><br>  config.headers = config.headers || &#123;&#125;;<br><br>  <span class="hljs-comment">// 使用/lib/defaults.js中的transformRequest方法，对config.headers和config.data进行格式化</span><br>  <span class="hljs-comment">// 比如将headers中的Accept，Content-Type统一处理成大写</span><br>  <span class="hljs-comment">// 比如如果请求正文是一个Object会格式化为JSON字符串，并添加application/json;charset=utf-8的Content-Type</span><br>  <span class="hljs-comment">// 等一系列操作</span><br>  config.data = transformData(<br>    config.data,<br>    config.headers,<br>    config.transformRequest<br>  );<br><br>  <span class="hljs-comment">// 合并不同配置的headers，config.headers的配置优先级更高</span><br>  config.headers = utils.merge(<br>    config.headers.common || &#123;&#125;,<br>    config.headers[config.method] || &#123;&#125;,<br>    config.headers || &#123;&#125;<br>  );<br><br>  <span class="hljs-comment">// 删除headers中的method属性</span><br>  utils.forEach(<br>    [<span class="hljs-string">&#x27;delete&#x27;</span>, <span class="hljs-string">&#x27;get&#x27;</span>, <span class="hljs-string">&#x27;head&#x27;</span>, <span class="hljs-string">&#x27;post&#x27;</span>, <span class="hljs-string">&#x27;put&#x27;</span>, <span class="hljs-string">&#x27;patch&#x27;</span>, <span class="hljs-string">&#x27;common&#x27;</span>],<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanHeaderConfig</span>(<span class="hljs-params">method</span>) </span>&#123;<br>      <span class="hljs-keyword">delete</span> config.headers[method];<br>    &#125;<br>  );<br><br>  <span class="hljs-comment">// 如果config配置了adapter，使用config中配置adapter的替代默认的请求方法</span><br>  <span class="hljs-keyword">var</span> adapter = config.adapter || defaults.adapter;<br><br>  <span class="hljs-comment">// 使用adapter方法发起请求（adapter根据浏览器环境或者Node环境会有不同）</span><br>  <span class="hljs-keyword">return</span> adapter(config).then(<br>    <span class="hljs-comment">// 请求正确返回的回调</span><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onAdapterResolution</span>(<span class="hljs-params">response</span>) </span>&#123;<br>      <span class="hljs-comment">// 判断是否以及取消了请求，如果取消了请求抛出以取消</span><br>      throwIfCancellationRequested(config);<br><br>      <span class="hljs-comment">// 使用/lib/defaults.js中的transformResponse方法，对服务器返回的数据进行格式化</span><br>      <span class="hljs-comment">// 例如，使用JSON.parse对响应正文进行解析</span><br>      response.data = transformData(<br>        response.data,<br>        response.headers,<br>        config.transformResponse<br>      );<br><br>      <span class="hljs-keyword">return</span> response;<br>    &#125;,<br>    <span class="hljs-comment">// 请求失败的回调</span><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onAdapterRejection</span>(<span class="hljs-params">reason</span>) </span>&#123;<br>      <span class="hljs-keyword">if</span> (!isCancel(reason)) &#123;<br>        throwIfCancellationRequested(config);<br><br>        <span class="hljs-keyword">if</span> (reason &amp;&amp; reason.response) &#123;<br>          reason.response.data = transformData(<br>            reason.response.data,<br>            reason.response.headers,<br>            config.transformResponse<br>          );<br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(reason);<br>    &#125;<br>  );<br>&#125;;<br></code></pre></td></tr></table></figure><p>再来看看<code>axios</code>是如何实现取消请求的，实现文件在<code>CancelToken.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CancelToken</span>(<span class="hljs-params">executor</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> executor !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&#x27;executor must be a function.&#x27;</span>);<br>  &#125;<br>  <span class="hljs-comment">// 在 CancelToken 上定义一个 pending 状态的 promise ，将 resolve 回调赋值给外部变量 resolvePromise</span><br>  <span class="hljs-keyword">var</span> resolvePromise;<br>  <span class="hljs-built_in">this</span>.promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promiseExecutor</span>(<span class="hljs-params">resolve</span>) </span>&#123;<br>    resolvePromise = resolve;<br>  &#125;);<br><br>  <span class="hljs-keyword">var</span> token = <span class="hljs-built_in">this</span>;<br>  <span class="hljs-comment">// 立即执行 传入的 executor函数，将真实的 cancel 方法通过参数传递出去。</span><br>  <span class="hljs-comment">// 一旦调用就执行 resolvePromise 即前面的 promise 的 resolve，就更改promise的状态为 resolve。</span><br>  <span class="hljs-comment">// 那么xhr中定义的 CancelToken.promise.then方法就会执行, 从而xhr内部会取消请求</span><br>  executor(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cancel</span>(<span class="hljs-params">message</span>) </span>&#123;<br>    <span class="hljs-comment">// 判断请求是否已经取消过，避免多次执行</span><br>    <span class="hljs-keyword">if</span> (token.reason) &#123;<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    token.reason = <span class="hljs-keyword">new</span> Cancel(message);<br>    resolvePromise(token.reason);<br>  &#125;);<br>&#125;<br><br>CancelToken.source = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">source</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">// source 方法就是返回了一个 CancelToken 实例，与直接使用 new CancelToken 是一样的操作</span><br>  <span class="hljs-keyword">var</span> cancel;<br>  <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">new</span> CancelToken(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">executor</span>(<span class="hljs-params">c</span>) </span>&#123;<br>    cancel = c;<br>  &#125;);<br>  <span class="hljs-comment">// 返回创建的 CancelToken 实例以及取消方法</span><br>  <span class="hljs-keyword">return</span> &#123;<br>    token: token,<br>    cancel: cancel<br>  &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><p>实际上取消请求的操作是在 <code>xhr.js</code> 中也有响应的配合的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (config.cancelToken) &#123;<br>    config.cancelToken.promise.then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onCanceled</span>(<span class="hljs-params">cancel</span>) </span>&#123;<br>        <span class="hljs-keyword">if</span> (!request) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">// 取消请求</span><br>        request.abort();<br>        reject(cancel);<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>巧妙的地方在 <code>CancelToken</code>中 <code>executor</code> 函数，通过<code>resolve</code>函数的传递与执行，控制<code>promise</code>的状态</p>]]></content>
    
    
    
    <tags>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>element-ui,textarea样式</title>
    <link href="/2021/01/13/el-textarea/"/>
    <url>/2021/01/13/el-textarea/</url>
    
    <content type="html"><![CDATA[<p>今天在新加了一个需求需要用到textarea,但是文本域在focus的时候border是红色的，其他的input输入框focus时border是蓝色的，于是想用el-input_inner:focus去改变样式，发现对textarea是不起作用的，上网搜了一下需要用el-textarea_inner:focus改变样式,虽然textarea的标签是el-input,修改样式还是要用el-textarea。</p>]]></content>
    
    
    
    <tags>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue切换页面取消未完成接口请求</title>
    <link href="/2020/12/23/vue%E5%88%87%E6%8D%A2%E9%A1%B5%E9%9D%A2%E5%8F%96%E6%B6%88%E6%9C%AA%E5%AE%8C%E6%88%90%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82/"/>
    <url>/2020/12/23/vue%E5%88%87%E6%8D%A2%E9%A1%B5%E9%9D%A2%E5%8F%96%E6%B6%88%E6%9C%AA%E5%AE%8C%E6%88%90%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82/</url>
    
    <content type="html"><![CDATA[<p>我们有时候会遇到这种场景，当vue切换页面时，尚未完成的接口由于异步原因，会造成报错等问题，那么这时候就需要去取消这些接口的执行</p><a id="more"></a><blockquote><p>页面A请求接口axios1–&gt;axios创建CancelToken对象保存请求至store变量CancelTokenArr–&gt;当页面切换至B–&gt;进入全局路由守卫调用VUEX的清除CancelTokenArr方法–&gt;遍历CancelTokenArr清除</p></blockquote><h4>axios</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../store&#x27;</span><br><span class="hljs-keyword">let</span> cancelTokenArr=[] <span class="hljs-comment">//储存cancel token</span><br><span class="hljs-comment">// request拦截器</span><br>service.interceptors.request.use(<br>  config =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (store.getters.token) &#123;<br>        config.headers[<span class="hljs-string">&#x27;X-Token&#x27;</span>] = getToken()<br>        <span class="hljs-comment">// 在发送请求设置cancel token</span><br>        config.cancelToken = <span class="hljs-keyword">new</span> axios.CancelToken(<span class="hljs-function"><span class="hljs-params">cancel</span> =&gt;</span> &#123;<br>            store.commit(<span class="hljs-string">&#x27;PUSH_CANCEL&#x27;</span>, &#123;<br>                cancelToken: cancel<br>            &#125;)<br>        &#125;)<br>    &#125;<br>    <span class="hljs-keyword">return</span> config<br>  &#125;,<br>  error =&gt; &#123;<br>    <span class="hljs-built_in">console</span>.log(error) <span class="hljs-comment">// for debug</span><br>    <span class="hljs-built_in">Promise</span>.reject(error)<br>  &#125;<br>)<br></code></pre></td></tr></table></figure><h4>vuex</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> axios = &#123;<br>    state: &#123;<br>        cancelTokenArr: []<br>    &#125;,<br><br>    mutations: &#123;<br>        <span class="hljs-function"><span class="hljs-title">PUSH_CANCEL</span>(<span class="hljs-params">state, payload</span>)</span>&#123;<br>            state.cancelTokenArr.push(payload.cancelToken);<br>        &#125;,<br>        <br>        <span class="hljs-function"><span class="hljs-title">CLAER_CANCEL</span>(<span class="hljs-params">&#123;cancelTokenArr&#125;</span>)</span>&#123;<br>        <br>            cancelTokenArr.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>               item(<span class="hljs-string">&#x27;路由跳转取消请求&#x27;</span>);<br>            &#125;);<br>        <br>            cancelTokenArr = [];<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> user<br></code></pre></td></tr></table></figure><h4>router</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span><br>router.beforeEach(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;<br>    store.commit(<span class="hljs-string">&#x27;CLAER_CANCEL&#x27;</span>); <span class="hljs-comment">// 取消请求</span><br>    next()<br>&#125;)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>key在VUE中的作用</title>
    <link href="/2020/12/09/key%E5%9C%A8VUE%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
    <url>/2020/12/09/key%E5%9C%A8VUE%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>diff算法需要比对虚拟dom的修改，然后异步的渲染到页面中，当出现大量相同的标签时，vnode会首先判断key和标签名是否一致，如果一致再去判断子节点一致，使用key可以帮助diff算法提升判断的速度，在页面重新渲染时更快消耗更少</p>]]></content>
    
    
    
    <tags>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reduce</title>
    <link href="/2020/11/30/reduce/"/>
    <url>/2020/11/30/reduce/</url>
    
    <content type="html"><![CDATA[<p>reduce是ES6的数组方法之一，用好了事半功倍，今天分享一下reduce的用法</p><a id="more"></a><h4 id="1、reduce语法"><a href="#1、reduce语法" class="headerlink" title="1、reduce语法"></a>1、reduce语法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">arr.reduce(callback,[initialValue])<br></code></pre></td></tr></table></figure><p>reduce 为数组中的每一个元素依次执行回调函数，不包括数组中被删除或从未被赋值的元素，接受四个参数：初始值（或者上一次回调函数的返回值），当前元素值，当前索引，调用 reduce 的数组。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp">callback （执行数组中每个值的函数，包含四个参数）<br><br>    <span class="hljs-number">1</span>、previousValue （上一次调用回调返回的值，或者是提供的初始值（initialValue））<br>    <span class="hljs-number">2</span>、currentValue （数组中当前被处理的元素）<br>    <span class="hljs-number">3</span>、index （当前元素在数组中的索引）<br>    <span class="hljs-number">4</span>、<span class="hljs-built_in">array</span> （调用 reduce 的数组）<br><br>initialValue （作为第一次调用 callback 的第一个参数。）<br></code></pre></td></tr></table></figure><h4 id="2、实例解析-initialValue-参数"><a href="#2、实例解析-initialValue-参数" class="headerlink" title="2、实例解析 initialValue 参数"></a>2、实例解析 initialValue 参数</h4><p>先看第一个例子：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];<br><span class="hljs-keyword">var</span> sum = arr.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prev, cur, index, arr</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(prev, cur, index);<br>    <span class="hljs-keyword">return</span> prev + cur;<br>&#125;)<br><span class="hljs-built_in">console</span>.log(arr, sum);<br></code></pre></td></tr></table></figure><blockquote><p>打印结果：<br>1 2 1<br>3 3 2<br>6 4 3<br>[1, 2, 3, 4] 10</p></blockquote><p>这里可以看出，上面的例子index是从1开始的，第一次的prev的值是数组的第一个值。数组长度是4，但是reduce函数循环3次。</p><p>再看第二个例子：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">var</span>  arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];<br><span class="hljs-keyword">var</span> sum = arr.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prev, cur, index, arr</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(prev, cur, index);<br>    <span class="hljs-keyword">return</span> prev + cur;<br>&#125;，<span class="hljs-number">0</span>) <span class="hljs-comment">//注意这里设置了初始值</span><br><span class="hljs-built_in">console</span>.log(arr, sum);<br></code></pre></td></tr></table></figure><blockquote><p>打印结果：<br>0 1 0<br>1 2 1<br>3 3 2<br>6 4 3<br>[1, 2, 3, 4] 10</p></blockquote><p>这个例子index是从0开始的，第一次的prev的值是我们设置的初始值0，数组长度是4，reduce函数循环4次。</p><p>结论：<code>如果没有提供initialValue，reduce 会从索引1的地方开始执行 callback 方法，跳过第一个索引。如果提供initialValue，从索引0开始。</code></p><p>注意：如果这个数组为空，运用reduce是什么情况？</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">var</span>  arr = [];<br><span class="hljs-keyword">var</span> sum = arr.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prev, cur, index, arr</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(prev, cur, index);<br>    <span class="hljs-keyword">return</span> prev + cur;<br>&#125;)<br><span class="hljs-comment">//报错，&quot;TypeError: Reduce of empty array with no initial value&quot;</span><br></code></pre></td></tr></table></figure><p>但是要是我们设置了初始值就不会报错，如下：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">var</span>  arr = [];<br><span class="hljs-keyword">var</span> sum = arr.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prev, cur, index, arr</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(prev, cur, index);<br>    <span class="hljs-keyword">return</span> prev + cur;<br>&#125;，<span class="hljs-number">0</span>)<br><span class="hljs-built_in">console</span>.log(arr, sum); <span class="hljs-comment">// [] 0</span><br></code></pre></td></tr></table></figure><p><strong>所以一般来说我们提供初始值通常更安全</strong></p><h4 id="3、reduce的简单用法"><a href="#3、reduce的简单用法" class="headerlink" title="3、reduce的简单用法"></a>3、reduce的简单用法</h4><p>当然最简单的就是我们常用的数组求和，求乘积了。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">var</span>  arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];<br><span class="hljs-keyword">var</span> sum = arr.reduce(<span class="hljs-function">(<span class="hljs-params">x,y</span>)=&gt;</span>x+y)<br><span class="hljs-keyword">var</span> mul = arr.reduce(<span class="hljs-function">(<span class="hljs-params">x,y</span>)=&gt;</span>x*y)<br><span class="hljs-built_in">console</span>.log( sum ); <span class="hljs-comment">//求和，10</span><br><span class="hljs-built_in">console</span>.log( mul ); <span class="hljs-comment">//求乘积，24</span><br></code></pre></td></tr></table></figure><h4 id="4、reduce的高级用法"><a href="#4、reduce的高级用法" class="headerlink" title="4、reduce的高级用法"></a>4、reduce的高级用法</h4><p>（1）计算数组中每个元素出现的次数</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">let</span> names = [<span class="hljs-string">&#x27;Alice&#x27;</span>, <span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-string">&#x27;Tiff&#x27;</span>, <span class="hljs-string">&#x27;Bruce&#x27;</span>, <span class="hljs-string">&#x27;Alice&#x27;</span>];<br><br><span class="hljs-keyword">let</span> nameNum = names.reduce(<span class="hljs-function">(<span class="hljs-params">pre,cur</span>)=&gt;</span>&#123;<br>  <span class="hljs-keyword">if</span>(cur <span class="hljs-keyword">in</span> pre)&#123;<br>    pre[cur]++<br>  &#125;<span class="hljs-keyword">else</span>&#123;<br>    pre[cur] = <span class="hljs-number">1</span> <br>  &#125;<br>  <span class="hljs-keyword">return</span> pre<br>&#125;,&#123;&#125;)<br><span class="hljs-built_in">console</span>.log(nameNum); <span class="hljs-comment">//&#123;Alice: 2, Bob: 1, Tiff: 1, Bruce: 1&#125;</span><br></code></pre></td></tr></table></figure><p>（2）数组去重</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>]<br><span class="hljs-keyword">let</span> newArr = arr.reduce(<span class="hljs-function">(<span class="hljs-params">pre,cur</span>)=&gt;</span>&#123;<br>    <span class="hljs-keyword">if</span>(!pre.includes(cur))&#123;<br>      <span class="hljs-keyword">return</span> pre.concat(cur)<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>      <span class="hljs-keyword">return</span> pre<br>    &#125;<br>&#125;,[])<br><span class="hljs-built_in">console</span>.log(newArr);<span class="hljs-comment">// [1, 2, 3, 4]</span><br></code></pre></td></tr></table></figure><p>（3）将二维数组转化为一维</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">let</span> arr = [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]]<br><span class="hljs-keyword">let</span> newArr = arr.reduce(<span class="hljs-function">(<span class="hljs-params">pre,cur</span>)=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> pre.concat(cur)<br>&#125;,[])<br><span class="hljs-built_in">console</span>.log(newArr); <span class="hljs-comment">// [0, 1, 2, 3, 4, 5]</span><br></code></pre></td></tr></table></figure><p>（3）将多维数组转化为一维</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">let</span> arr = [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>,[<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>]]]<br><span class="hljs-keyword">const</span> newArr = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arr</span>)</span>&#123;<br>   <span class="hljs-keyword">return</span> arr.reduce(<span class="hljs-function">(<span class="hljs-params">pre,cur</span>)=&gt;</span>pre.concat(<span class="hljs-built_in">Array</span>.isArray(cur)?newArr(cur):cur),[])<br>&#125;<br><span class="hljs-built_in">console</span>.log(newArr(arr)); <span class="hljs-comment">//[0, 1, 2, 3, 4, 5, 6, 7]</span><br></code></pre></td></tr></table></figure><p>（4）、对象里的属性求和</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> result = [<br>    &#123;<br>        subject: <span class="hljs-string">&#x27;math&#x27;</span>,<br>        score: <span class="hljs-number">10</span><br>    &#125;,<br>    &#123;<br>        subject: <span class="hljs-string">&#x27;chinese&#x27;</span>,<br>        score: <span class="hljs-number">20</span><br>    &#125;,<br>    &#123;<br>        subject: <span class="hljs-string">&#x27;english&#x27;</span>,<br>        score: <span class="hljs-number">30</span><br>    &#125;<br>];<br><br><span class="hljs-keyword">var</span> sum = result.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prev, cur</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> cur.score + prev;<br>&#125;, <span class="hljs-number">0</span>);<br><span class="hljs-built_in">console</span>.log(sum) <span class="hljs-comment">//60</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>null与undefined</title>
    <link href="/2020/10/26/null%E4%B8%8Eundefined/"/>
    <url>/2020/10/26/null%E4%B8%8Eundefined/</url>
    
    <content type="html"><![CDATA[<p>null&amp;undefined我们肯定不陌生，两者皆表示此值为空，但是两者在细节上还是有些区别</p><a id="more"></a><p><strong>null表示”没有对象”，即该处不应该有值。</strong>典型用法是：</p><blockquote><p>（1） 作为函数的参数，表示该函数的参数不是对象。</p><p>（2） 作为对象原型链的终点。</p></blockquote><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">Object</span>.getPrototypeOf(<span class="hljs-built_in">Object</span>.prototype)<br><span class="hljs-comment">// null</span><br></code></pre></td></tr></table></figure><p><strong>undefined表示”缺少值”，就是此处应该有一个值，但是还没有定义。</strong>典型用法是：</p></blockquote><blockquote><p>（1）变量被声明了，但没有赋值时，就等于undefined。</p><p>（2) 调用函数时，应该提供的参数没有提供，该参数等于undefined。</p><p>（3）对象没有赋值的属性，该属性的值为undefined。</p><p>（4）函数没有返回值时，默认返回undefined。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> i;<br>i <span class="hljs-comment">// undefined</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">x</span>)</span>&#123;<span class="hljs-built_in">console</span>.log(x)&#125;<br>f() <span class="hljs-comment">// undefined</span><br><br><span class="hljs-keyword">var</span>  o = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();<br>o.p <span class="hljs-comment">// undefined</span><br><br><span class="hljs-keyword">var</span> x = f();<br>x <span class="hljs-comment">// undefined</span><br></code></pre></td></tr></table></figure></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>window.onerror</title>
    <link href="/2020/09/04/window-onerror/"/>
    <url>/2020/09/04/window-onerror/</url>
    
    <content type="html"><![CDATA[<p>为了便于分析发生的错误，一般利用 <code>window.onerror</code> 事件来监听错误的发生。 它比<code>try</code> <code>catch</code>的捕获错误信息的能力要强大。</p><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;String&#125;</span>  </span>msg    错误描述</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;String&#125;</span>  </span>url    报错文件</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Number&#125;</span>  </span>row    行号</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Number&#125;</span>  </span>col    列号</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Object&#125;</span>  </span>error  错误Error对象</span><br><span class="hljs-comment"> */</span><br> <span class="hljs-built_in">window</span>.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">msg, url, row, col, error</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;我知道错误了&#x27;</span>);<br>  <span class="hljs-comment">// return true; // 返回 true 的时候，异常不会向上抛出，控制台不会输出错误</span><br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数组解构</title>
    <link href="/2020/08/04/%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84/"/>
    <url>/2020/08/04/%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<p>分享一下数组解构</p><a id="more"></a><p>有一个数组，这个数组有可能是空的。有一种需求是访问任意位置数组元素，如果这个位置为空，则返回一个默认值。<br>通常情况下有的人可能会使用数组的length属性做判断：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> colors = [];<br><span class="hljs-keyword">let</span> firstColor = <span class="hljs-string">&quot;white&quot;</span>;<br><span class="hljs-keyword">if</span>(colors.length &gt; <span class="hljs-number">0</span>) &#123; <br>firstColor = colors[<span class="hljs-number">0</span>];<br>&#125;<br>firstColor; <span class="hljs-comment">//=&gt; &quot;white&quot;</span><br></code></pre></td></tr></table></figure><p>幸运的是，数组解构可以更快捷高效的实现相同的效果：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> colors = [];<br><span class="hljs-keyword">const</span> [firstColor = <span class="hljs-string">&quot;white&quot;</span>] = colors;<br>firstColor; <span class="hljs-comment">//=&gt; &quot;white&quot;</span><br></code></pre></td></tr></table></figure><p>const [firstColor = “white”] = colors;将colors数组的第一个元素赋值给了变量firstColor。如果这个数组的下标为0的位置上没有任何元素（注：为undefined时即认为为空），white将作为默认值赋值给firstColor。<br>数组解构是非常灵活的，如果你只想访问数组的第二个元素，方法如下所示：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> colors = [];<br><span class="hljs-keyword">const</span> [, secondColor = <span class="hljs-string">&quot;black&quot;</span>] = colors;<br>secondColor; <span class="hljs-comment">//=&gt; &quot;black&quot;</span><br></code></pre></td></tr></table></figure><p>在解构表达式的左边写一个逗号：意味着数组的第一个元素被忽略掉。colors数组下标为1的元素被解构赋值给了变量secondColor。</p><p>不可变原则禁止修改对象。幸运的是，解构可以帮助你在遵循不可变原则的同时完成这些操作。</p><p>将解构与展开运算符（rest operator）结合使用来移除数组的第一个元素：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br><span class="hljs-keyword">const</span> [, ...fooNumbers] = numbers;<br>fooNumbers; <span class="hljs-comment">//=&gt; [2, 3]</span><br>numbers; <span class="hljs-comment">//=&gt; [1,2,3]</span><br></code></pre></td></tr></table></figure><p>这个解构操作[, …fooNumbers] = numbers创建了一个新的数组fooNumbers，这个数组包含numbers除了第一个元素外的其余元素。</p><p>numbers数组并没有被改变，这种方式遵循了不可变原则。</p><p>除此之外，你也可以在遵循不可变原则的同时使用同样的方法来删除一个对象的属性。如下所示，删除big对象的foo属性：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> big = &#123; <span class="hljs-attr">foo</span>: <span class="hljs-string">&quot;value foo&quot;</span>, <span class="hljs-attr">bar</span>: <span class="hljs-string">&quot;value bar&quot;</span>,&#125;;<br><span class="hljs-keyword">const</span> &#123; foo, ...small &#125; = big;<br>small; <span class="hljs-comment">//=&gt; &#123; bar: &quot;value bar&quot; &#125;</span><br>big; <span class="hljs-comment">//=&gt;&#123; foo: &quot;value foo&quot;, bar: &quot;value bar&quot; &#125;</span><br></code></pre></td></tr></table></figure><p>上述方法将解构与对象展开运算符结合起来使用，创建了一个新的对象small，这个新对象包含big对象除了foo属性之外的所有属性。</p>]]></content>
    
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>fill用法</title>
    <link href="/2020/07/17/fill%E7%94%A8%E6%B3%95/"/>
    <url>/2020/07/17/fill%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>介绍下fill的用法,fill()方法用于将一个固定值替换数组的元素</p><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">array.fill(value, start, end)<br>value必填。start开始位置，end结束位置选填，end默认为array.length<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>];<br><span class="hljs-keyword">let</span> arr1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(arr.length).fill(<span class="hljs-string">&#x27;&#x27;</span>);<br><span class="hljs-keyword">let</span> arr2 = arr.fill(<span class="hljs-number">0</span>);<br><span class="hljs-keyword">let</span> arr3 = arr.fill(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>)<br>arr1 = [<span class="hljs-string">&#x27;&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>];<br>arr2 = [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>];<br>arr3 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Array.prototype.slice</title>
    <link href="/2020/07/16/Array-prototype-slice/"/>
    <url>/2020/07/16/Array-prototype-slice/</url>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">[].slice === <span class="hljs-built_in">Array</span>.prototype.slice<br><span class="hljs-literal">true</span><br>slice 这个方法在不接受任何参数的时候会返回 <span class="hljs-built_in">this</span> 本身<br><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,&#123;<span class="hljs-attr">a</span>:<span class="hljs-string">&#x27;b&#x27;</span>&#125;];<br><span class="hljs-keyword">var</span> arr1 = arr.slice(<span class="hljs-number">2</span>);<br>arr1[<span class="hljs-number">3</span>].a=<span class="hljs-string">&#x27;cc&#x27;</span>;<span class="hljs-built_in">console</span>.log(arr,arr1)<br>此代码中，a[b] = cc<br></code></pre></td></tr></table></figure><p><code>slice</code> 不会修改原数组，只会返回一个浅复制了原数组中的元素的一个新数组。原数组的元素会按照下述规则拷贝：</p><ul><li><p>如果该元素是个对象引用 （不是实际的对象），<code>slice</code> 会拷贝这个对象引用到新的数组里。两个对象引用都引用了同一个对象。如果被引用的对象发生改变，则新的和原来的数组中的这个元素也会发生改变。</p></li><li><p>对于字符串、数字及布尔值来说（不是 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number"><code>Number</code></a> 或者 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Boolean"><code>Boolean</code></a> 对象），<code>slice</code> 会拷贝这些值到新的数组里。在别的数组里修改这些字符串或数字或是布尔值，将不会影响另一个数组。</p></li></ul><p>如果向两个数组任一中添加了新元素，则另一个不会受到影响。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">Array</span>.prototype.slice = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">begin, end</span>) </span>&#123;<br>  end = <span class="hljs-keyword">typeof</span> end !== <span class="hljs-string">&#x27;undefined&#x27;</span> ? end : <span class="hljs-built_in">this</span>.length<br><br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-built_in">this</span>) === <span class="hljs-string">&#x27;[object Array]&#x27;</span>) &#123;<br>    <span class="hljs-keyword">return</span> _slice.call(<span class="hljs-built_in">this</span>, begin, end)<br>  &#125;<br><br>  <span class="hljs-keyword">var</span> i,<br>    cloned = [],<br>    size,<br>    len = <span class="hljs-built_in">this</span>.length<br><br>  <span class="hljs-keyword">var</span> start = begin || <span class="hljs-number">0</span><br>  start = start &gt;= <span class="hljs-number">0</span> ? start : <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>, len + start)<br><br>  <span class="hljs-keyword">var</span> upTo = <span class="hljs-keyword">typeof</span> end == <span class="hljs-string">&#x27;number&#x27;</span> ? <span class="hljs-built_in">Math</span>.min(end, len) : len<br>  <span class="hljs-keyword">if</span> (end &lt; <span class="hljs-number">0</span>) &#123;<br>    upTo = len + end<br>  &#125;<br><br>  size = upTo - start<br><br>  <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) &#123;<br>    cloned = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(size)<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.charAt) &#123;<br>      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        cloned[i] = <span class="hljs-built_in">this</span>.charAt(start + i)<br>      &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        cloned[i] = <span class="hljs-built_in">this</span>[start + i]<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> cloned<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">list</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>)<br>&#125;<br><span class="hljs-built_in">console</span>.log(list(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>))<span class="hljs-comment">//[1,2,3]</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
